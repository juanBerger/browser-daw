{"version":3,"file":"canvas-44f703d7.js","sources":["../src/canvas.js"],"sourcesContent":["onconnect = e => {\n    \n    const port = e.ports[0];\n    const TOP_OFFSET = 10;\n    \n    let playCanvas = null;\n    let playCtx = null;\n    let leftCanvas = null;\n    let leftCtx = null;\n    \n    let lastpp = 0;\n\n\n    const drawPlayhead = (cx, leftOffset, topOffset, length) => {\n        \n        cx.strokeStyle = \"rgba(212, 73, 243, 0.635)\";\n        cx.lineWidth = 3;\n        cx.lineCap = 'round';\n        cx.clearRect(0, 0, playCanvas.width, playCanvas.height);\n        cx.beginPath();\n        cx.moveTo(leftOffset, topOffset);\n        cx.lineTo(leftOffset, length);\n        cx.stroke();  \n    }\n\n\n    const drawMeter = (cx, leftCanvas, topOffset) => {\n\n        // const meterWidth = 7;\n        // const xOffset = leftCanvas.width - (meterWidth + 2);\n        \n        // cx.fillStyle = 'blue';\n        // cx.fillRect(xOffset, 0, meterWidth, 120);\n        \n        // let grd = cx.createLinearGradient(0, 0, 100, 100)\n        // grd.addColorStop(0, 'green');\n        // grd.addColorStop(0.5, 'yellow');\n        // cx.fillStyle = grd\n        // cx.beginPath();\n        // cx.rect(0, 0, leftCanvas.width, leftCanvas.height)\n        // console.log('drawMeter')\n    }\n\n\n    port.onmessage = e => {\n\n        if(e.data.playCanvas){\n            playCanvas = e.data.playCanvas;\n            playCtx = playCanvas.getContext('2d');\n        }\n\n\n        else if (e.data.leftCanvas){\n            //leftCanvas = e.data.leftCanvas;\n            //leftCtx = leftCanvas.getContext('2d');\n        }\n\n\n        else if (e.data.resize){\n            \n            const d = e.data.resize;\n            if (d.type === 'playhead'){\n                playCanvas.width = Math.round(d.width);\n                playCanvas.height = Math.round(d.height);\n                drawPlayhead(playCtx, lastpp, TOP_OFFSET, d.height - TOP_OFFSET);\n            }\n            \n            else if (d.type === 'leftArea'){\n                \n                // leftCanvas.width = Math.round(d.width);\n                // leftCanvas.height = Math.round(d.height);\n                // drawMeter(leftCtx, leftCanvas);\n\n            }\n        \n        }\n\n        else if (e.data.addMeter){\n\n\n\n        }\n        \n        else if (e.data.tick){\n            // let frame = e.data.tick - 0;\n            // if (frame < 0){\n            //     frame = 0\n            // }\n\n            const pixelPosition = Math.round(e.data.tick / e.data.fpp);\n            console.log(e.data, pixelPosition);\n            drawPlayhead(playCtx, pixelPosition, TOP_OFFSET, playCanvas.height - TOP_OFFSET);\n            lastpp = pixelPosition;\n        }\n    }\n};\n\n "],"names":[],"mappings":"AAAA,SAAS,GAAG,CAAC,IAAI;AACjB;AACA,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5B,IAAI,MAAM,UAAU,GAAG,EAAE,CAAC;AAC1B;AACA,IAAI,IAAI,UAAU,GAAG,IAAI,CAAC;AAC1B,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC;AAGvB;AACA,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC;AACnB;AACA;AACA,IAAI,MAAM,YAAY,GAAG,CAAC,EAAE,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,KAAK;AAChE;AACA,QAAQ,EAAE,CAAC,WAAW,GAAG,2BAA2B,CAAC;AACrD,QAAQ,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC;AACzB,QAAQ,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,QAAQ,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;AAChE,QAAQ,EAAE,CAAC,SAAS,EAAE,CAAC;AACvB,QAAQ,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;AACzC,QAAQ,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;AACtC,QAAQ,EAAE,CAAC,MAAM,EAAE,CAAC;AACpB,MAAK;AAmBL;AACA;AACA,IAAI,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI;AAC1B;AACA,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;AAC7B,YAAY,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;AAC3C,YAAY,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAClD,SAAS;AACT;AACA;AACA,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAG1B;AACT;AACA;AACA,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;AAC/B;AACA,YAAY,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;AACpC,YAAY,IAAI,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC;AACtC,gBAAgB,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AACvD,gBAAgB,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AACzD,gBAAgB,YAAY,CAAC,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;AACjF,aAAa;AACb;AACA,iBAAiB,IAAI,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC,CAM9B;AACb;AACA,SAAS;AACT;AACA,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAIxB;AACT;AACA,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAC7B;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACvE,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;AAC/C,YAAY,YAAY,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;AAC7F,YAAY,MAAM,GAAG,aAAa,CAAC;AACnC,SAAS;AACT,MAAK;AACL,CAAC"}