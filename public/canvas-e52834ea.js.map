{"version":3,"file":"canvas-e52834ea.js","sources":["../src/canvas.js"],"sourcesContent":["onconnect = e => {\n    \n    const port = e.ports[0];\n    const TOP_OFFSET = 10;\n    \n    let playCanvas = null;\n    let playCtx = null;\n    let lastpp = 0;\n\n\n    const drawPlayhead = (cx, leftOffset, topOffset, length) => {\n        \n        cx.strokeStyle = \"rgba(212, 73, 243, 0.635)\";\n        cx.lineWidth = 3;\n        cx.lineCap = 'round';\n        cx.clearRect(leftOffset - 10, 0, 20, playCanvas.height)\n        cx.beginPath();\n        cx.moveTo(leftOffset, topOffset);\n        cx.lineTo(leftOffset, length);\n        cx.stroke();\n       \n       \n    }\n\n\n    port.onmessage = e => {\n\n        if(e.data.playCanvas){\n            playCanvas = e.data.playCanvas;\n            playCtx = playCanvas.getContext('2d');\n        }\n\n        else if (e.data.resize){\n            const d = e.data.resize;\n            if (d.type === 'playhead'){\n                playCanvas.width = Math.round(d.width);\n                playCanvas.height = Math.round(d.height);\n                drawPlayhead(playCtx, lastpp, TOP_OFFSET, d.height - TOP_OFFSET);\n\n            }\n        }\n        \n        else if (e.data.tick){\n            const pixelPosition = e.data.tick / e.data.fpp;\n            drawPlayhead(playCtx, pixelPosition, TOP_OFFSET, playCanvas.height - TOP_OFFSET);\n            lastpp = pixelPosition;\n            \n        }\n    }\n};\n\n"],"names":[],"mappings":"AAAA,SAAS,GAAG,CAAC,IAAI;AACjB;AACA,IAAI,MAAM,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAC5B,IAAI,MAAM,UAAU,GAAG,EAAE,CAAC;AAC1B;AACA,IAAI,IAAI,UAAU,GAAG,IAAI,CAAC;AAC1B,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC;AACvB,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC;AACnB;AACA;AACA,IAAI,MAAM,YAAY,GAAG,CAAC,EAAE,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,KAAK;AAChE;AACA,QAAQ,EAAE,CAAC,WAAW,GAAG,2BAA2B,CAAC;AACrD,QAAQ,EAAE,CAAC,SAAS,GAAG,CAAC,CAAC;AACzB,QAAQ,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,QAAQ,EAAE,CAAC,SAAS,CAAC,UAAU,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,MAAM,EAAC;AAC/D,QAAQ,EAAE,CAAC,SAAS,EAAE,CAAC;AACvB,QAAQ,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;AACzC,QAAQ,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;AACtC,QAAQ,EAAE,CAAC,MAAM,EAAE,CAAC;AACpB;AACA;AACA,MAAK;AACL;AACA;AACA,IAAI,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI;AAC1B;AACA,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;AAC7B,YAAY,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;AAC3C,YAAY,OAAO,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AAClD,SAAS;AACT;AACA,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;AAC/B,YAAY,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;AACpC,YAAY,IAAI,CAAC,CAAC,IAAI,KAAK,UAAU,CAAC;AACtC,gBAAgB,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AACvD,gBAAgB,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AACzD,gBAAgB,YAAY,CAAC,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;AACjF;AACA,aAAa;AACb,SAAS;AACT;AACA,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;AAC7B,YAAY,MAAM,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;AAC3D,YAAY,YAAY,CAAC,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,UAAU,CAAC,MAAM,GAAG,UAAU,CAAC,CAAC;AAC7F,YAAY,MAAM,GAAG,aAAa,CAAC;AACnC;AACA,SAAS;AACT,MAAK;AACL,CAAC"}